generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id           String    @id @default(cuid())
  email        String    @unique
  passwordHash String
  role         String    @default("SALARIE")  // <- était enum Role
  createdAt    DateTime  @default(now())
  employee     Employee?
}

model Employee {
  id         String     @id @default(cuid())
  userId     String?    @unique
  user       User?      @relation(fields: [userId], references: [id])
  firstName  String
  lastName   String
  phone      String?
  address    String?
  status     String     @default("ACTIF")     // <- était enum Status
  avatarUrl  String?
  createdAt  DateTime   @default(now())
  timesheets Timesheet[]
}

model Timesheet {
  id                String   @id @default(cuid())
  employee          Employee @relation(fields: [employeeId], references: [id])
  employeeId        String
  declaredStart     DateTime
  declaredEnd       DateTime
  declaredBreakMins Int      @default(0)
  status            String   @default("EN_ATTENTE") // <- était enum TStatus
  validatedByUserId String?
  validatedAt       DateTime?
  createdAt         DateTime @default(now())
}

// NOTE: plus d'enums avec SQLite. On garde des String ("ADMIN","ACTIF","EN_ATTENTE", etc.)
